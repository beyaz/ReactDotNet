import{a as X}from"./chunk-PPVZF2IH.js";import"./chunk-SLTOXZYO.js";import"./chunk-RVEJIPMH.js";import"./chunk-G7S3TOUE.js";import{A,B as W,a as j,b,d as G,m as J,v as Q}from"./chunk-NI4MO4TP.js";import"./chunk-DLL45UCJ.js";import{a as me}from"./chunk-2W22VGCX.js";import{h as de}from"./chunk-GYULANB4.js";var c=de(me());function K(){return K=Object.assign?Object.assign.bind():function(P){for(var m=1;m<arguments.length;m++){var d=arguments[m];for(var t in d)Object.prototype.hasOwnProperty.call(d,t)&&(P[t]=d[t])}return P},K.apply(this,arguments)}var ge={root:function(m){var d=m.props,t=m.context;return j("p-inputmask",{"p-filled":d.filled,"p-invalid":d.invalid,"p-variant-filled":d.variant?d.variant==="filled":t&&t.inputStyle==="filled"})}},N=W.extend({defaultProps:{__TYPE:"InputMask",autoClear:!0,autoFocus:!1,className:null,disabled:!1,id:null,mask:null,maxLength:null,invalid:!1,variant:null,name:null,onBlur:null,onChange:null,onComplete:null,onFocus:null,placeholder:null,readOnly:!1,required:!1,size:null,slotChar:"_",style:null,tabIndex:null,tooltip:null,tooltipOptions:null,type:"text",unmask:!1,value:null,children:void 0},css:{classes:ge}}),ee=c.memo(c.forwardRef(function(P,m){var d=c.useContext(J),t=N.getProps(P,d),a=c.useRef(null),C=c.useRef(null),w=c.useRef(0),s=c.useRef([]),f=c.useRef([]),v=c.useRef(0),B=c.useRef(null),T=c.useRef(!1),E=c.useRef(null),re=c.useRef(null),x=c.useRef(null),I=c.useRef(null),L=c.useRef(null),z=c.useRef(!1),q={props:t},te=N.setMetaData(q),ne=te.cx,p=function(e,n){var r,u,l,o=a.current;return!o||!o.offsetParent||o!==document.activeElement?null:(typeof e=="number"?(u=e,l=typeof n=="number"?n:u,o.setSelectionRange?o.setSelectionRange(u,l):o.createTextRange&&(r=o.createTextRange(),r.collapse(!0),r.moveEnd("character",l),r.moveStart("character",u),r.select())):o.setSelectionRange?(u=o.selectionStart,l=o.selectionEnd):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),u=0-r.duplicate().moveStart("character",-1e5),l=u+r.text.length),{begin:u,end:l})},D=function(){for(var e=C.current;e<=w.current;e++)if(s.current[e]&&f.current[e]===g(e))return!1;return!0},g=c.useCallback(function(i){return i<t.slotChar.length?t.slotChar.charAt(i):t.slotChar.charAt(0)},[t.slotChar]),F=function(){return t.unmask?M():a.current&&a.current.value},k=function(e){for(;++e<v.current&&!s.current[e];);return e},ue=function(e){for(;--e>=0&&!s.current[e];);return e},U=function(e,n){var r,u;if(!(e<0)){for(r=e,u=k(n);r<v.current;r++)if(s.current[r]){if(u<v.current&&s.current[r].test(f.current[u]))f.current[r]=f.current[u],f.current[u]=g(u);else break;u=k(u)}y(),p(Math.max(C.current,e))}},ae=function(e){var n,r,u,l;for(n=e,r=g(e);n<v.current;n++)if(s.current[n])if(u=k(n),l=f.current[n],f.current[n]=r,u<v.current&&s.current[u].test(l))r=l;else break},le=function(e){var n=a.current.value,r=p();if(r){if(B.current.length&&B.current.length>n.length){for(h(!0);r.begin>0&&!s.current[r.begin-1];)r.begin--;if(r.begin===0)for(;r.begin<C.current&&!s.current[r.begin];)r.begin++;p(r.begin,r.begin)}else{for(h(!0);r.begin<v.current&&!s.current[r.begin];)r.begin++;p(r.begin,r.begin)}t.onComplete&&D()&&t.onComplete({originalEvent:e,value:F()}),R(e)}},H=function(e){if(T.current=!1,h(),R(e),S(),t.onBlur&&t.onBlur(e),a.current.value!==E.current){var n=document.createEvent("HTMLEvents");n.initEvent("change",!0,!1),a.current.dispatchEvent(n)}},ce=function(e){if(!t.readOnly){var n=e.which||e.keyCode,r,u,l;if(B.current=a.current.value,n===8||n===46||b.isIOS()&&n===127){if(r=p(),!r)return;u=r.begin,l=r.end,l-u===0&&(u=n!==46?ue(u):l=k(u-1),l=n===46?k(l):l),O(u,l),U(u,l-1),R(e),e.preventDefault()}else n===13?(H(e),R(e)):n===27&&(a.current.value=E.current,p(0,h()),R(e),e.preventDefault())}},ie=function(e){if(!t.readOnly){var n=p();if(n){var r=e.which||e.keyCode,u,l,o,$;if(!(e.ctrlKey||e.altKey||e.metaKey||r<32)){if(r&&r!==13){if(n.end-n.begin!==0&&(O(n.begin,n.end),U(n.begin,n.end-1)),u=k(n.begin-1),u<v.current&&(l=String.fromCharCode(r),s.current[u].test(l))){if(ae(u),f.current[u]=l,y(),o=k(u),b.isAndroid()){var pe=function(){p(o)};setTimeout(pe,0)}else p(o);n.begin<=w.current&&($=D())}e.preventDefault()}R(e),t.onComplete&&$&&t.onComplete({originalEvent:e,value:F()})}}}},O=function(e,n){var r;for(r=e;r<n&&r<v.current;r++)s.current[r]&&(f.current[r]=g(r))},y=function(){a.current&&(a.current.value=f.current.join(""))},h=function(e){re.current=!0;var n=a.current&&a.current.value,r=-1,u,l,o;for(u=0,o=0;u<v.current;u++)if(s.current[u]){for(f.current[u]=g(u);o++<n.length;)if(l=n.charAt(o-1),s.current[u].test(l)){f.current[u]=l,r=u;break}if(o>n.length){O(u+1,v.current);break}}else f.current[u]===n.charAt(o)&&o++,u<x.current&&(r=u);return e?y():r+1<x.current?t.autoClear||f.current.join("")===I.current?(a.current&&a.current.value&&(a.current.value=""),O(0,v.current)):y():(y(),a.current&&(a.current.value=a.current.value.substring(0,r+1))),x.current?u:C.current},oe=function(e){if(!t.readOnly){T.current=!0,clearTimeout(L.current);var n;a.current?E.current=a.current.value:E.current="",n=h()||0,L.current=setTimeout(function(){a.current===document.activeElement&&(y(),n===t.mask.replace("?","").length?p(0,n):p(n),S())},100),t.onFocus&&t.onFocus(e)}},se=function(e){z.current?le(e):Z(e)},Z=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!t.readOnly){if(!n){var r=h(!0);p(r)}R(e),t.onComplete&&D()&&t.onComplete({originalEvent:e,value:F()})}},M=c.useCallback(function(){for(var i=[],e=0;e<f.current.length;e++){var n=f.current[e];s.current[e]&&n!==g(e)&&i.push(n)}return i.join("")},[g]),R=function(e){if(t.onChange){var n=t.unmask?M():e&&e.target.value;t.onChange({originalEvent:e,value:I.current!==n?n:"",stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{name:t.name,id:t.id,value:I.current!==n?n:""}})}},S=function(){a.current&&a.current.value&&a.current.value.length>0?b.addClass(a.current,"p-filled"):b.removeClass(a.current,"p-filled")},V=function(e){var n;return a.current&&(t.value==null?a.current.value="":(a.current.value=t.value,n=h(e),setTimeout(function(){if(a.current)return y(),h(e)},10)),E.current=a.current.value),S(),n},Y=c.useCallback(function(){return t.unmask?t.value!==M():I.current!==a.current.value&&a.current.value!==t.value},[t.unmask,t.value,M]),_=function(){if(t.mask){s.current=[],x.current=t.mask.length,v.current=t.mask.length,C.current=null;var e={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};z.current=b.isChrome()&&b.isAndroid();for(var n=t.mask.split(""),r=0;r<n.length;r++){var u=n[r];u==="?"?(v.current--,x.current=r):e[u]?(s.current.push(new RegExp(e[u])),C.current===null&&(C.current=s.current.length-1),r<x.current&&(w.current=s.current.length-1)):s.current.push(null)}f.current=[];for(var l=0;l<n.length;l++){var o=n[l];o!=="?"&&(e[o]?f.current.push(g(l)):f.current.push(o))}I.current=f.current.join("")}};c.useImperativeHandle(m,function(){return{props:t,focus:function(){return b.focus(a.current)},getElement:function(){return a.current}}}),c.useEffect(function(){G.combinedRefs(a,m)},[a,m]),Q(function(){_(),V()}),A(function(){_(),p(V(!0)),t.unmask&&R()},[t.mask]),A(function(){Y()&&V()},[Y]);var fe=N.getOtherProps(t),ve=j(t.className,ne("root",{context:d}));return c.createElement(X,K({ref:a,autoFocus:t.autoFocus,id:t.id,type:t.type,name:t.name,style:t.style,className:ve},fe,{placeholder:t.placeholder,size:t.size,maxLength:t.maxLength,tabIndex:t.tabIndex,disabled:t.disabled,invalid:t.invalid,readOnly:t.readOnly,onFocus:oe,onBlur:H,onKeyDown:ce,onKeyPress:ie,onInput:se,onPaste:function(e){return Z(e,!0)},required:t.required,tooltip:t.tooltip,tooltipOptions:t.tooltipOptions,pt:t.pt,unstyled:t.unstyled,__parentMetadata:{parent:q}}))}));ee.displayName="InputMask";export{ee as default};
